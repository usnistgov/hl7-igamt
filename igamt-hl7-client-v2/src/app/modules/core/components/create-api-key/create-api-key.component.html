<div class="api-keys-layout">
  <app-dam-alerts-container></app-dam-alerts-container>
  <div class="api-keys-card">
    <div class="page-title" style="display: flex; justify-content: center;">
      <h4>
        <i class="fa fa-key"></i> Create API Key
      </h4>
    </div>
    <div>
      <div style="display: flex; justify-content: flex-end; margin-top: 5px; margin-bottom: 10px;">
        <button class="btn btn-sm btn-success" (click)="create()" [disabled]="form.invalid || resources.length === 0">
          <i class="fa fa-save"></i>
          Create
        </button>
      </div>
      <form [formGroup]="form">
        <div class="form-group">
          <label style="font-weight: bold;" for="name">Name</label>
          <input formControlName="name" class="form-control" type="text" name="name" id="name">
        </div>
        <div class="form-group">
          <p-checkbox [formControl]="form.controls['expires']" [binary]="true" (ngModelChange)="expiresChange($event)"></p-checkbox>
          <label style="font-weight: bold; margin-left: 5px;" for="name">Expiration (days)</label>
          <input formControlName="validityDays" class="form-control" type="number" min="1" name="name" id="name">
        </div>
      </form>
      <div style="display: flex; justify-content: space-between; margin-top: 5px; margin-bottom: 10px;">
        <h5>Code Sets</h5>
        <button class="btn btn-sm btn-primary" (click)="addCodeSet()">
          <i class="fa fa-plus"></i>
          Add CodeSet
        </button>
      </div>
      <div *ngIf="resources.length === 0" style="text-align: center; color: #f56262;">
        At least one code set must be added to the access key.
      </div>
      <ul *ngIf="resources.length > 0"  class="list-group">
        <li *ngFor="let item of resources; let i = index" class="list-group-item list-item" style="display: flex; align-items: center; justify-content: space-between;">
          <span>
            <app-entity-bagde [type]="item.data.type"></app-entity-bagde>
            <strong style="margin-left: 10px">{{item.data.label}}</strong>
          </span>
          <button class="btn btn-sm btn-danger" (click)="removeResouce(i)">
            <i class="fa fa-times"></i>
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>
